<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{.Title}}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="/static/shared.css" rel="stylesheet">
</head>
<body>
    {{template "header.html" .}}

    <div class="container mt-4">
        <div class="row">
            <div class="col-12">
                <div class="card">
                    <div class="card-header">
                        <h5 class="mb-0">服务器配置</h5>
                        <small class="text-muted">当前配置（只读）</small>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6">
                                <h6>服务器设置</h6>
                                <table class="table table-sm">
                                    <tr>
                                        <th>主机地址:</th>
                                        <td><code>{{.Config.Server.Host}}</code></td>
                                    </tr>
                                    <tr>
                                        <th>代理端口:</th>
                                        <td><code>{{.Config.Server.Port}}</code></td>
                                    </tr>
                                </table>
                            </div>
                            <div class="col-md-6">
                                <h6>网页管理设置</h6>
                                <table class="table table-sm">
                                    <tr>
                                        <th>启用:</th>
                                        <td>
                                            {{if .Config.WebAdmin.Enabled}}
                                                <span class="badge bg-success">是</span>
                                            {{else}}
                                                <span class="badge bg-secondary">否</span>
                                            {{end}}
                                        </td>
                                    </tr>
                                    <tr>
                                        <th>访问地址:</th>
                                        <td><code>{{.Config.Server.Host}}:{{.Config.Server.Port}}/admin/</code></td>
                                    </tr>
                                </table>
                            </div>
                        </div>

                        <div class="row mt-4">
                            <div class="col-md-6">
                                <h6>标签系统配置</h6>
                                <table class="table table-sm">
                                    <tr>
                                        <th>启用:</th>
                                        <td>
                                            {{if .Config.Tagging.Enabled}}
                                                <span class="badge bg-success">已启用</span>
                                            {{else}}
                                                <span class="badge bg-secondary">已禁用</span>
                                            {{end}}
                                        </td>
                                    </tr>
                                    <tr>
                                        <th>管道超时:</th>
                                        <td><code>{{.Config.Tagging.PipelineTimeout}}</code></td>
                                    </tr>
                                    <tr>
                                        <th>标记器数量:</th>
                                        <td><span class="badge bg-info">{{len .Config.Tagging.Taggers}}</span></td>
                                    </tr>
                                    <tr>
                                        <th>已启用标记器:</th>
                                        <td>
                                            {{$first := true}}
                                            {{range $tagger := .Config.Tagging.Taggers}}
                                                {{if $tagger.Enabled}}
                                                    {{if not $first}}, {{end}}
                                                    <span class="badge bg-light text-dark">{{$tagger.Name}}</span>
                                                    {{$first = false}}
                                                {{end}}
                                            {{end}}
                                            {{if $first}}<span class="text-muted">无已启用的标记器</span>{{end}}
                                        </td>
                                    </tr>
                                </table>
                            </div>
                            <div class="col-md-6">
                                <h6>日志配置</h6>
                                <table class="table table-sm">
                                    <tr>
                                        <th>日志级别:</th>
                                        <td><code>{{.Config.Logging.Level}}</code></td>
                                    </tr>
                                    <tr>
                                        <th>记录请求类型:</th>
                                        <td>
                                            <span class="badge {{if eq .Config.Logging.LogRequestTypes "all"}}bg-info{{else if eq .Config.Logging.LogRequestTypes "failed"}}bg-warning{{else}}bg-success{{end}}">
                                                {{.Config.Logging.LogRequestTypes}}
                                            </span>
                                        </td>
                                    </tr>
                                    <tr>
                                        <th>记录请求体:</th>
                                        <td>
                                            <span class="badge {{if eq .Config.Logging.LogRequestBody "full"}}bg-success{{else if eq .Config.Logging.LogRequestBody "truncated"}}bg-warning{{else}}bg-secondary{{end}}">
                                                {{.Config.Logging.LogRequestBody}}
                                            </span>
                                        </td>
                                    </tr>
                                    <tr>
                                        <th>记录响应体:</th>
                                        <td>
                                            <span class="badge {{if eq .Config.Logging.LogResponseBody "full"}}bg-success{{else if eq .Config.Logging.LogResponseBody "truncated"}}bg-warning{{else}}bg-secondary{{end}}">
                                                {{.Config.Logging.LogResponseBody}}
                                            </span>
                                        </td>
                                    </tr>
                                    <tr>
                                        <th>日志目录:</th>
                                        <td><code>{{.Config.Logging.LogDirectory}}</code></td>
                                    </tr>
                                </table>
                            </div>
                            <div class="col-md-6">
                                <h6>校验配置</h6>
                                <table class="table table-sm">
                                    <tr>
                                        <th>严格 Anthropic 格式:</th>
                                        <td>
                                            {{if .Config.Validation.StrictAnthropicFormat}}
                                                <span class="badge bg-success">已启用</span>
                                            {{else}}
                                                <span class="badge bg-secondary">已禁用</span>
                                            {{end}}
                                        </td>
                                    </tr>
                                    <tr>
                                        <th>校验流式响应:</th>
                                        <td>
                                            {{if .Config.Validation.ValidateStreaming}}
                                                <span class="badge bg-success">已启用</span>
                                            {{else}}
                                                <span class="badge bg-secondary">已禁用</span>
                                            {{end}}
                                        </td>
                                    </tr>
                                    <tr>
                                        <th>无效时断开连接:</th>
                                        <td>
                                            {{if .Config.Validation.DisconnectOnInvalid}}
                                                <span class="badge bg-warning">是</span>
                                            {{else}}
                                                <span class="badge bg-secondary">否</span>
                                            {{end}}
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </div>

                        <div class="row mt-4">
                            <div class="col-md-6">
                                <h6>代理超时配置</h6>
                                <table class="table table-sm">
                                    <tr>
                                        <th>TLS握手超时:</th>
                                        <td><code>{{.Config.Timeouts.Proxy.TLSHandshake}}</code></td>
                                    </tr>
                                    <tr>
                                        <th>响应头超时:</th>
                                        <td><code>{{.Config.Timeouts.Proxy.ResponseHeader}}</code></td>
                                    </tr>
                                    <tr>
                                        <th>空闲连接超时:</th>
                                        <td><code>{{.Config.Timeouts.Proxy.IdleConnection}}</code></td>
                                    </tr>
                                    <tr>
                                        <th>整体请求超时:</th>
                                        <td>
                                            {{if .Config.Timeouts.Proxy.OverallRequest}}
                                                <code>{{.Config.Timeouts.Proxy.OverallRequest}}</code>
                                            {{else}}
                                                <span class="badge bg-info">无限制</span>
                                            {{end}}
                                        </td>
                                    </tr>
                                </table>
                            </div>
                            <div class="col-md-6">
                                <h6>健康检查超时配置</h6>
                                <table class="table table-sm">
                                    <tr>
                                        <th>TLS握手超时:</th>
                                        <td><code>{{.Config.Timeouts.HealthCheck.TLSHandshake}}</code></td>
                                    </tr>
                                    <tr>
                                        <th>响应头超时:</th>
                                        <td><code>{{.Config.Timeouts.HealthCheck.ResponseHeader}}</code></td>
                                    </tr>
                                    <tr>
                                        <th>空闲连接超时:</th>
                                        <td><code>{{.Config.Timeouts.HealthCheck.IdleConnection}}</code></td>
                                    </tr>
                                    <tr>
                                        <th>整体请求超时:</th>
                                        <td><code>{{.Config.Timeouts.HealthCheck.OverallRequest}}</code></td>
                                    </tr>
                                    <tr>
                                        <th>检查间隔:</th>
                                        <td><code>{{.Config.Timeouts.HealthCheck.CheckInterval}}</code></td>
                                    </tr>
                                </table>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/static/shared.js"></script>

    {{template "footer.html" .}}
</body>
</html>